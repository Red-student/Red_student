<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Secret Page</title>
</head>
<body>
<h1>Welcome to the Secret Page</h1>
<form id="loginForm">
  <label for="username">Username:</label><br>
  <input type="text" id="username" name="username"><br>
  <label for="password">Password:</label><br>
  <input type="password" id="password" name="password"><br>
  <label for="secretWord">Secret Word:</label><br>
  <input type="text" id="secretWord" name="secretWord"><br><br>
  <button type="submit">Submit</button>
</form>
<div id="secretData" style="display: none;">
  <h2>Secret Data</h2>
  <p id="dataFromCookie"></p>
</div>

<script>
  document.getElementById("loginForm").addEventListener("submit", function(event) {
    event.preventDefault();
    var username = document.getElementById("username").value;
    var password = document.getElementById("password").value;
    var secretWord = document.getElementById("secretWord").value;

    // Проверка логина, пароля и секретного слова (можешь здесь добавить свою логику проверки)

    if (secretWord === "Секрет") {
      document.getElementById("secretData").style.display = "block";
      var userData = "Username: " + username + "<br>Password: " + password;
      document.getElementById("dataFromCookie").innerHTML = userData;

      // Сохранение данных в cookie
      var expiryDate = new Date();
      expiryDate.setDate(expiryDate.getDate() + 2); // Сегодня + 2 дня
      document.cookie = "userData=" + userData + ";expires=" + expiryDate.toUTCString();
    } else {
      alert("Incorrect secret word!");
    }
  });

  // Функция для отображения секретных данных при запросе
  function showSecretData() {
    var cookies = document.cookie.split("; ");
    cookies.forEach(function(cookie) {
      var cookiePair = cookie.split("=");
      var cookieName = cookiePair[0];
      var cookieValue = cookiePair[1];
      if (cookieName === "userData") {
        document.getElementById("secretData").style.display = "block";
        document.getElementById("dataFromCookie").innerHTML = cookieValue;
      }
    });
  }

  // Вызов функции при клике на кнопку запроса
  document.getElementById("showDataButton").addEventListener("click", showSecretData);

  // Получение текущей даты и установка срока хранения cookie
  var expiryDate = new Date();
  expiryDate.setDate(expiryDate.getDate() + 2); // Сегодня + 2 дня
  document.cookie = "expiryDate=" + expiryDate.toUTCString();

  // Проверка срока годности cookie
  function checkCookieExpiry() {
    var cookies = document.cookie.split("; ");
    cookies.forEach(function(cookie) {
      var cookiePair = cookie.split("=");
      var cookieName = cookiePair[0];
      var cookieValue = cookiePair[1];
      if (cookieName === "expiryDate") {
        var expiryDate = new Date(cookieValue);
        if (expiryDate < new Date()) {
          alert("Cookie has expired!");
        }
      }
    });
  }

  // Вызов функции проверки при загрузке страницы
  checkCookieExpiry();
</script>
</body>
</html>