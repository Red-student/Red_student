<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Secret Page</title>
</head>
<body>
<h1>Welcome to the Secret Page</h1>
<form id="loginForm">
  <label for="username">Username:</label><br>
  <input type="text" id="username" name="username"><br>
  <label for="password">Password:</label><br>
  <input type="password" id="password" name="password"><br>
  <label for="secretWord">Secret Word:</label><br>
  <input type="text" id="secretWord" name="secretWord"><br><br>
  <button type="submit">Submit</button>
</form>
<div id="secretData" style="display: none;">
  <h2>Secret Data</h2>
  <p id="dataFromCookie"></p>
</div>

<button id="showDataButton" type="button" style="display: none;">Show Secret Data</button>

<script>
  // Функция для получения текущей даты и установки срока хранения cookie
  function setCookieExpiry() {
    var expiryDate = new Date();
    expiryDate.setDate(expiryDate.getDate() + 2); // Сегодня + 2 дня
    document.cookie = "expiryDate=" + expiryDate.toUTCString() + ";path=/";
  }

  // Вызываем функцию при загрузке страницы
  setCookieExpiry();

  // Функция для отображения данных из файла cookie текущего сеанса
  function displayCookieData() {
    var cookies = document.cookie.split("; ");
    var cookieData = "";
    cookies.forEach(function(cookie) {
      cookieData += cookie + "<br>";
    });
    document.getElementById("dataFromCookie").innerHTML = cookieData;
  }

  // Вызываем функцию при загрузке страницы
  displayCookieData();

  document.getElementById("loginForm").addEventListener("submit", function(event) {
    event.preventDefault(); // Предотвращаем стандартное действие формы
    var username = document.getElementById("username").value;
    var password = document.getElementById("password").value;
    var secretWord = document.getElementById("secretWord").value;

    // Проверка логина, пароля и секретного слова (можете здесь добавить свою логику проверки)

    if (secretWord === "твоё_секретное_слово") {
      // Сохранение данных в cookie с указанием пути '/'
      var userData = "Username: " + username + "<br>Password: " + password;
      var expiryDate = new Date();
      expiryDate.setDate(expiryDate.getDate() + 2); // Сегодня + 2 дня
      var cookieValue = "userData=" + userData + ";expires=" + expiryDate.toUTCString() + ";path=/";
      document.cookie = cookieValue;

      // Показать кнопку после успешного входа
      document.getElementById("showDataButton").style.display = "block";

      // Перезагрузить данные из файла cookie
      displayCookieData();
    } else {
      alert("Incorrect secret word!");
    }
  });

  // Функция для отображения секретных данных при запросе
  function showSecretData() {
    var cookies = document.cookie.split("; ");
    var correctSecretWord = false;

    // Проверяем наличие правильного секретного слова в cookie
    cookies.forEach(function(cookie) {
      if (cookie.includes("userData=secretWord=твоё_секретное_слово")) {
        correctSecretWord = true;
      }
    });

    // Если правильное секретное слово найдено, отображаем секретные данные
    if (correctSecretWord) {
      document.getElementById("secretData").style.display = "block";
      document.getElementById("dataFromCookie").innerHTML = "Secret Data: твои_секретные_данные";
    } else {
      alert("To show secret data, enter the correct secret word and click the button.");
    }
  }

  // Вызываем функцию при клике на кнопку запроса
  document.getElementById("showDataButton").addEventListener("click", showSecretData);
</script>
</body>
</html>